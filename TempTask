using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Task1
{
    class Program
    {
        static void Main(string[] args)
        {
            bool isPlaying = true;
            int userInput;
            DataBase dataBase = new DataBase();

            Console.WriteLine("Выберите действие\n1.Вывести всех игроков\n2.Добавить игрока" +
                    "\n3.Удалить игрока\n4.Забанить игрока\n5.Разбанить игрока\n6.Выход");

            while (isPlaying)
            {                
                switch (userInput = Convert.ToInt32(Console.ReadLine()))
                {
                    case 1 :
                        dataBase.ShowPlayers();
                        break;
                    case 2:
                        dataBase.AddPlayer();
                        break;
                    case 3:
                        dataBase.DeletePlayer();
                        break;
                    case 4:
                        dataBase.BanPlayer();
                        break;
                    case 5:
                        dataBase.UnBanPlayer();
                        break;
                    case 6:
                        isPlaying = false;
                        break;
                }
            }
        }
    }
    
    class Player
    {
        public int ID { get; private set; }
        public string Name { get; private set; }
        public string Nickname { get; private set; }
        public int Level { get; private set; }

        public Player(int playerID, string name, string nickname, int level)
        {
            ID = playerID;
            Name = name;
            Nickname = nickname;
            Level = level;
        }

        public void ShowInfo()
        {         
            Console.WriteLine($"ID игрока {ID}\nИмя игрока {Name}\nНикнейм игрока {Nickname}\nУровень игрока {Level}\n");
        }
    }

    class DataBase
    {
        List<Player> players = new List<Player>();
        List<Player> bannedPlayers = new List<Player>();
        
        public void ShowPlayers()
        {
            if (players.Count == 0)
            {
                Console.WriteLine("В базе нет ни одного игрока");
            }
            else
            {
                foreach (var player in players)
                {
                    player.ShowInfo();
                }

                if (bannedPlayers.Count != 0)
                {
                    Console.WriteLine("\nИгроки получившие бан");
                    foreach (var player in bannedPlayers)
                    {
                        player.ShowInfo();
                    }
                }
            }           
        }

        public void AddPlayer()
        {
            Random random = new Random();
            Console.WriteLine("Введите ID игрока");
            int idInput = 0;// = Convert.ToInt32(Console.ReadLine());
            bool isFound = false;


            while (isFound == false)
            {
                while (isFound == false)
                {
                    if (int.TryParse(Console.ReadLine(), out idInput) == false)
                    {
                        Console.WriteLine("Вы ввели не номер");
                    }
                    else
                    {
                        break;
                    }
                }

                foreach (var gamer in players)
                {
                    if (idInput == gamer.ID)
                    {
                        Console.WriteLine("Такой ID уже существует");
                    }
                    else
                    {
                        break;
                    }
                }
                isFound = true;
            }
           


            Console.WriteLine("Введите имя игрока");
            string Name = Console.ReadLine();
            Console.WriteLine("Введите никнейм игрока");
            string Nickname = Console.ReadLine();
            int Level = random.Next(1, 10);

            Player player = new Player(idInput, Name, Nickname, Level);
            players.Add(player);
        }

        public void DeletePlayer()
        {
            Console.WriteLine("Введите ID игрока которого хотите удалить");
            int idInput = Convert.ToInt32(Console.ReadLine());
            for (int i = 0; i < players.Count; i++)
            {
                if (idInput > players.Count)
                {
                    Console.WriteLine("Игрока с таким ID не существует");
                }
                else if (idInput == players[i].ID)
                {
                    players.RemoveAt(i);
                }
            }
        }

        public void BanPlayer()
        {
            Console.WriteLine("Введите ID игрока, которого хотите забанить");
            int idInput = Convert.ToInt32(Console.ReadLine());

            for (int i = 0; i < players.Count; i++)
            {
                if (idInput > players.Count)
                {
                    Console.WriteLine("Игрока с таким ID не существует");
                }
                else if (idInput == players[i].ID)
                {
                    bannedPlayers.Add(players[i]);
                }
            }
        }

        public void UnBanPlayer()
        {
            Console.WriteLine("Введите ID игрока, которого хотите разбанить");
            int idInput = Convert.ToInt32(Console.ReadLine());

            for (int i = 0; i < bannedPlayers.Count; i++)
            {
                if (idInput > bannedPlayers.Count)
                {
                    Console.WriteLine("Игрока с таким ID не существует");
                }
                else if (idInput == bannedPlayers[i].ID)
                {
                    players.Add(bannedPlayers[i]);
                    bannedPlayers.RemoveAt(i);
                }
            }
        }
    }
}
